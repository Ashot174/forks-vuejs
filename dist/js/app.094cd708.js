(function(e){function t(t){for(var o,n,i=t[0],p=t[1],l=t[2],u=0,h=[];u<i.length;u++)n=i[u],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&h.push(a[n][0]),a[n]=0;for(o in p)Object.prototype.hasOwnProperty.call(p,o)&&(e[o]=p[o]);c&&c(t);while(h.length)h.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],o=!0,i=1;i<r.length;i++){var p=r[i];0!==a[p]&&(o=!1)}o&&(s.splice(t--,1),e=n(n.s=r[0]))}return e}var o={},a={app:0},s=[];function n(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=o,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],p=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var c=p;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},3401:function(e,t,r){"use strict";r("a100")},"4cd2":function(e,t,r){"use strict";r("5059")},5059:function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);var o=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{attrs:{id:"nav"}},[r("router-link",{attrs:{to:"/"}},[e._v("Home")]),e._v(" | "),r("router-link",{attrs:{to:"/search-forks"}},[e._v("Search Forks")])],1),r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.ownerRepo,expression:"ownerRepo"}],staticClass:"forks-search",attrs:{type:"text",placeholder:"owner/repositoryName"},domProps:{value:e.ownerRepo},on:{input:function(t){t.target.composing||(e.ownerRepo=t.target.value)}}}),r("button",{staticClass:"btn btn-primary",on:{click:function(t){return e.searchHandler(e.ownerRepo)}}},[e._v("Search")])]),r("transition",{attrs:{name:"slide",mode:"out-in"}},[r("router-view")],1)],1)},s=[],n=r("2f62"),i={name:"app",data(){return{ownerRepo:""}},mounted(){if(this.$route.query.owner&&this.$route.query.repo){const e=this.$route.query.owner,t=this.$route.query.repo,r=this.$route.query.page||1;this.ownerRepo=`${e}/${t}`,this.$store.dispatch("forks/loadForks",{owner:e,repo:t}),this.$router.push({name:"forksSearch",params:{owner:e,repo:t,page:r}}),this.setOwnerRepo(this.ownerRepo)}},methods:{searchHandler(e){if(e.length>1&&e.includes("/")&&this.$route.params.owner!==e.split("/")[0].trim()&&this.$route.params.repo!==e.split("/")[1].trim()){this.$router.push({name:"forksSearch",params:{owner:e.split("/")[0].trim(),repo:e.split("/")[1].trim(),page:"1"}});const t=this.ownerRepo.split("/")[0].trim(),r=this.ownerRepo.split("/")[1].trim();this.setOwnerRepo(e),this.$store.dispatch("forks/loadForks",{owner:t,repo:r,page:"1"})}},...Object(n["b"])("forks",{setOwnerRepo:"setOwnerRepo"})}},p=i,l=(r("7faf"),r("2877")),c=Object(l["a"])(p,a,s,!1,null,null,null),u=c.exports,h=r("8c4f"),f=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},g=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"about"},[r("h1",[e._v("Welcome to home page for test task")])])}],m=(r("4cd2"),{}),d=Object(l["a"])(m,f,g,!1,null,"4afdb0d0",null),v=d.exports,w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Forks",{attrs:{ownerRepo:e.ownerRepo}})],1)},k=[],_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return 0!==Object.keys(e.forks).length?r("div",{staticClass:"offset"},[r("h2"),r("table",{staticClass:"table table-bordered"},[e._m(0),e._l(e.displayedForks,(function(t){return r("tr",[r("td",[e._v(e._s(t.full_name))]),r("td",[e._v(e._s(t.owner.login))]),r("td",[e._v(e._s(t.stargazers_count))]),r("td",[r("a",{attrs:{target:"_blank",href:"https://github.com/"+t.full_name}},[e._v(e._s("Reference to "+t.full_name+" fork's repo"))])]),r("td",[r("i",{staticClass:"far fa-star",class:e.getClass(t.full_name),on:{click:function(r){return e.toggleFavorite(r,t)}}})])])}))],2),r("nav",{staticClass:"navigation",attrs:{"aria-label":"Page navigation example"}},[r("ul",{staticClass:"pagination"},[r("li",{staticClass:"page-item"},[1!=e.page?r("a",{staticClass:"page-link",on:{click:e.pagePrevious}},[e._v(" Previous ")]):e._e()]),r("li",{staticClass:"page-item"},e._l(e.pages.slice(e.page-1,e.page+5),(function(t){return r("a",{staticClass:"page-link",on:{click:function(r){return e.pageCertain(t)}}},[e._v(" "+e._s(t)+" ")])})),0),r("li",{staticClass:"page-item"},[e.page<e.pages.length?r("a",{staticClass:"page-link",on:{click:e.pageNext}},[e._v(" Next ")]):e._e()])])])]):e._e()},b=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("th",[e._v("Repository name")]),r("th",[e._v("Owner")]),r("th",[e._v("Count of stars")]),r("th",[e._v("reference to fork's repo")]),r("th",[e._v("Add to favorites")])])}],$={name:"Forks",props:{ownerRepo:{type:String,required:!0}},data(){return{page:1,perPage:20,pages:[]}},computed:{...Object(n["c"])("forks",{forks:"forks"}),displayedForks(){return this.paginate(this.forks)}},methods:{setPages(){this.pages=[];let e=Math.ceil(this.forks.length/this.perPage);for(let t=1;t<=e;t++)this.pages.push(t)},paginate(e){let t=this.page,r=this.perPage,o=t*r-r,a=t*r;return e.slice(o,a)},toggleFavorite(e,t){e.target.classList.toggle("favorite"),null===localStorage.getItem(t.full_name)?localStorage.setItem(t.full_name,"https://github.com/"+t.full_name):localStorage.removeItem(t.full_name)},getClass(e){return null===localStorage.getItem(e)?null:"favorite"},pageNext(){this.page=this.page+1,this.$router.push({name:"forksSearch",params:{owner:this.$route.params.owner,repo:this.$route.params.repo,page:this.page.toString()}})},pagePrevious(){this.page=this.page-1,this.$router.push({name:"forksSearch",params:{owner:this.$route.params.owner,repo:this.$route.params.repo,page:this.page.toString()}})},pageCertain(e){this.page=e,+this.$route.params.page!==this.page&&this.$router.push({name:"forksSearch",params:{owner:this.$route.params.owner,repo:this.$route.params.repo,page:this.page.toString()}})}},watch:{forks(){this.setPages(),this.$route.params.page&&!isNaN(+this.$route.params.page)&&+this.$route.params.page<=Math.ceil(this.forks.length/this.perPage)&&(this.page=+this.$route.params.page)}},filters:{trimWords(e){return e.split(" ").splice(0,20).join(" ")+"..."}},mounted(){this.setPages(),this.$route.params.page&&!isNaN(+this.$route.params.page)&&+this.$route.params.page<=Math.ceil(this.forks.length/this.perPage)&&(this.page=+this.$route.params.page)}},y=$,O=(r("3401"),Object(l["a"])(y,_,b,!1,null,"47faf26a",null)),R=O.exports,S={name:"ForksSearch",components:{Forks:R},computed:{ownerRepo(){return this.$store.getters["forks/ownerRepo"]}}},j=S,P=Object(l["a"])(j,w,k,!1,null,"e6d6faf6",null),C=P.exports,x=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Page not found")]),r("hr"),r("router-link",{attrs:{to:"/"}},[e._v(" Go to home page ")])],1)},F=[],E={name:"E404"},N=E,q=Object(l["a"])(N,x,F,!1,null,"3fa066a4",null),M=q.exports,A=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h1",[e._v("Enter your search term")])},H=[],I={name:"Search"},T=I,z=(r("76d3"),Object(l["a"])(T,A,H,!1,null,"59620458",null)),G=z.exports;o["a"].use(h["a"]);const J=[{path:"/",name:"Home",component:v},{path:"/search-forks",name:"search",component:G},{path:"/search-forks?owner=:owner&repo=:repo&page=:page",name:"forksSearch",component:C,props:!0},{path:"*",component:M}],W=new h["a"]({mode:"history",base:"/",routes:J});var B=W,L=r("9bec"),U=r("f70b"),D={namespaced:!0,state:{forks:[],ownerRepo:""},getters:{forks(e){return e.forks},ownerRepo(e){return e.ownerRepo}},mutations:{loadForks(e,t){e.forks=t},clearForks(e){e.forks=[]},setOwnerRepo(e,t){e.ownerRepo=t}},actions:{async loadForks(e,t){e.commit("clearForks");try{const r=L["a"].plugin(U["a"]),o=new r({baseUrl:"https://api.github.com"});let a=await o.paginate("GET /repos/{owner}/{repo}/forks",{accept:"application/vnd.github.v3+json",owner:t.owner,repo:t.repo,sort:"stargazers",per_page:100,page:1});e.commit("loadForks",a)}catch(r){alert("Ошибка: "+r.message)}},setOwnerRepo(e,t){e.commit("setOwnerRepo",t)}}};o["a"].use(n["a"]);var K=new n["a"].Store({modules:{forks:D},strict:!1}),Q=r("9483");Object(Q["a"])("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});r("4989"),r("ab8b");o["a"].config.productionTip=!1,new o["a"]({router:B,store:K,render:function(e){return e(u)}}).$mount("#app")},"76d3":function(e,t,r){"use strict";r("d375")},"7faf":function(e,t,r){"use strict";r("b8ff")},a100:function(e,t,r){},b8ff:function(e,t,r){},d375:function(e,t,r){}});
//# sourceMappingURL=app.094cd708.js.map