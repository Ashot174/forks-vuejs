(function(e){function t(t){for(var o,s,i=t[0],l=t[1],c=t[2],u=0,f=[];u<i.length;u++)s=i[u],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&f.push(n[s][0]),n[s]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);p&&p(t);while(f.length)f.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],o=!0,i=1;i<r.length;i++){var l=r[i];0!==n[l]&&(o=!1)}o&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var o={},n={app:0},a=[];function s(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=o,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(r,o,function(t){return e[t]}.bind(null,o));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var p=l;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"49ff":function(e,t,r){"use strict";r("db04")},"4cd2":function(e,t,r){"use strict";r("5059")},5059:function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);var o=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{attrs:{id:"nav"}},[r("router-link",{attrs:{to:"/"}},[e._v("Home")]),e._v(" | "),r("router-link",{attrs:{to:"/search-forks"}},[e._v("Search Forks")])],1),r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.ownerRepo,expression:"ownerRepo"}],staticClass:"forks-search",attrs:{type:"text",placeholder:"owner/repositoryName"},domProps:{value:e.ownerRepo},on:{input:function(t){t.target.composing||(e.ownerRepo=t.target.value)}}}),r("button",{staticClass:"btn btn-primary",on:{click:function(t){return e.searchHandler(e.ownerRepo)}}},[e._v("Search")])]),r("transition",{attrs:{name:"slide",mode:"out-in"}},[r("router-view")],1)],1)},a=[],s=r("2f62"),i={name:"app",data(){return{ownerRepo:""}},methods:{searchHandler(e){if(e.length>1&&e.includes("/")){const t=this.ownerRepo.split("/")[0].trim(),r=this.ownerRepo.split("/")[1].trim();this.setOwnerRepo(e),this.$store.dispatch("forks/loadForks",{owner:t,repo:r})}},...Object(s["b"])("forks",{setOwnerRepo:"setOwnerRepo"})}},l=i,c=(r("7faf"),r("2877")),p=Object(c["a"])(l,n,a,!1,null,null,null),u=p.exports,f=r("8c4f"),g=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},d=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"about"},[r("h1",[e._v("Welcome to home page for test task")])])}],h=(r("4cd2"),{}),m=Object(c["a"])(h,g,d,!1,null,"4afdb0d0",null),v=m.exports,_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Forks",{attrs:{ownerRepo:e.ownerRepo}})],1)},b=[],k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return 0!==Object.keys(e.forks).length?r("div",{staticClass:"offset"},[r("h2"),r("table",{staticClass:"table table-bordered"},[e._m(0),e._l(e.displayedForks,(function(t){return r("tr",[r("td",[e._v(e._s(t.full_name))]),r("td",[e._v(e._s(t.owner.login))]),r("td",[e._v(e._s(t.stargazers_count))]),r("td",[r("a",{attrs:{target:"_blank",href:"https://github.com/"+t.full_name}},[e._v(e._s("Reference to "+t.full_name+" fork's repo"))])]),r("td",[r("i",{staticClass:"far fa-star",class:e.getClass(t.full_name),on:{click:function(r){return e.toggleFavorite(r,t)}}})])])}))],2),r("nav",{staticClass:"navigation",attrs:{"aria-label":"Page navigation example"}},[r("ul",{staticClass:"pagination"},[r("li",{staticClass:"page-item"},[1!=e.page?r("a",{staticClass:"page-link",on:{click:function(t){e.page--}}},[e._v(" Previous ")]):e._e()]),r("li",{staticClass:"page-item"},e._l(e.pages.slice(e.page-1,e.page+5),(function(t){return r("a",{staticClass:"page-link",on:{click:function(r){e.page=t}}},[e._v(" "+e._s(t)+" ")])})),0),r("li",{staticClass:"page-item"},[e.page<e.pages.length?r("a",{staticClass:"page-link",on:{click:function(t){e.page++}}},[e._v(" Next ")]):e._e()])])])]):e._e()},w=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("th",[e._v("Repository name")]),r("th",[e._v("Owner")]),r("th",[e._v("Count of stars")]),r("th",[e._v("reference to fork's repo")]),r("th",[e._v("Add to favorites")])])}],y={name:"Forks",props:{ownerRepo:{type:String,required:!0}},data(){return{page:1,perPage:20,pages:[]}},computed:{...Object(s["c"])("forks",{forks:"forks"}),displayedForks(){return this.paginate(this.forks)}},methods:{setPages(){this.pages=[];let e=Math.ceil(this.forks.length/this.perPage);for(let t=1;t<=e;t++)this.pages.push(t)},paginate(e){let t=this.page,r=this.perPage,o=t*r-r,n=t*r;return e.slice(o,n)},toggleFavorite(e,t){e.target.classList.toggle("favorite"),null===localStorage.getItem(t.full_name)?localStorage.setItem(t.full_name,"https://github.com/"+t.full_name):localStorage.removeItem(t.full_name)},getClass(e){return null===localStorage.getItem(e)?null:"favorite"}},watch:{forks(){this.setPages()}},filters:{trimWords(e){return e.split(" ").splice(0,20).join(" ")+"..."}},mounted(){this.setPages()}},O=y,R=(r("49ff"),Object(c["a"])(O,k,w,!1,null,"7d22682a",null)),j=R.exports,C={name:"ForksSearch",components:{Forks:j},computed:{ownerRepo(){return this.$store.getters["forks/ownerRepo"]}}},F=C,P=Object(c["a"])(F,_,b,!1,null,"e6d6faf6",null),S=P.exports,x=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Page not found")]),r("hr"),r("router-link",{attrs:{to:"/"}},[e._v(" Go to home page ")])],1)},E=[],$={name:"E404"},N=$,M=Object(c["a"])(N,x,E,!1,null,"3fa066a4",null),A=M.exports;o["a"].use(f["a"]);const H=[{path:"/",name:"Home",component:v},{path:"/search-forks",name:"forksSearch",component:S},{path:"*",component:A}],I=new f["a"]({mode:"history",base:"/",routes:H});var T=I,q=r("9bec"),z=r("f70b"),G={namespaced:!0,state:{forks:[],ownerRepo:""},getters:{forks(e){return e.forks},ownerRepo(e){return e.ownerRepo}},mutations:{loadForks(e,t){e.forks=t},clearForks(e){e.forks=[]},setOwnerRepo(e,t){e.ownerRepo=t}},actions:{async loadForks(e,t){e.commit("clearForks");try{const r=q["a"].plugin(z["a"]),o=new r({baseUrl:"https://api.github.com"});let n=await o.paginate("GET /repos/{owner}/{repo}/forks",{accept:"application/vnd.github.v3+json",owner:t.owner,repo:t.repo,sort:"stargazers",per_page:100,page:1});e.commit("loadForks",n)}catch(r){alert("Ошибка: "+r.message)}},setOwnerRepo(e,t){e.commit("setOwnerRepo",t)}}};o["a"].use(s["a"]);var J=new s["a"].Store({modules:{forks:G},strict:!1}),W=r("9483");Object(W["a"])("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});r("4989"),r("ab8b");o["a"].config.productionTip=!1,new o["a"]({router:T,store:J,render:function(e){return e(u)}}).$mount("#app")},"7faf":function(e,t,r){"use strict";r("b8ff")},b8ff:function(e,t,r){},db04:function(e,t,r){}});
//# sourceMappingURL=app.4426e910.js.map